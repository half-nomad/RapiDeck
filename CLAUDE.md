# Claude 작업 지침서

> **중요**: RapiDeck 프로젝트 작업 시 반드시 이 문서를 먼저 읽고 참조할 것

---

## 📌 필수 참고 문서

### 작업 전 필독
1. **[docs/PRD.md](docs/PRD.md)** - 제품 요구사항 문서
   - 프로젝트 비전, 목표, 핵심 기능
   - 기술 스택, 데이터 모델
   - 작업 시작 전 항상 확인

2. **[docs/DESIGN_GUIDELINES.md](docs/DESIGN_GUIDELINES.md)** - 디자인 시스템 가이드라인
   - 색상, 폰트, 컴포넌트 규칙 **엄격 준수**
   - Gemini가 생성할 HTML의 모든 스타일 기준
   - UI 작업 시 필수 참조

3. **[docs/SYSTEM_PROMPT.md](docs/SYSTEM_PROMPT.md)** - Gemini API 시스템 프롬프트
   - Gemini에게 전달할 인스트럭션
   - 슬라이드 생성 로직 이해에 필수

4. **[docs/PLAN.md](docs/PLAN.md)** - 개발 로드맵 & 체크리스트
   - 주차별 작업 계획
   - 완료 여부 체크
   - 일일/주간 체크리스트

---

## 🚨 절대 규칙

### 1. 디자인 가이드라인 엄격 준수
- **변경 금지**: 색상, 폰트, 슬라이드 크기 절대 변경 불가
- **확인 필수**: 새로운 UI 추가 시 `docs/DESIGN_GUIDELINES.md` 확인
- **질문 필수**: 가이드라인과 충돌 시 사용자에게 먼저 물어볼 것

### 2. PRD 기준 준수
- 모든 기능은 `docs/PRD.md`에 명시된 범위 내에서 개발
- PRD에 없는 기능 추가 시 **반드시 사용자 승인** 받을 것
- 불명확한 요구사항은 **가정하지 말고 질문**할 것

### 3. 작업 전 체크리스트 확인
- `docs/PLAN.md`의 해당 주차 체크리스트 확인
- 완료 여부 업데이트
- 블로커 발견 시 즉시 보고

---

## 📂 프로젝트 구조

```
RapiDeck/
├── app/
│   ├── services/          # 비즈니스 로직
│   │   ├── document_parser.rb
│   │   ├── gemini_client.rb
│   │   ├── slide_generator.rb
│   │   └── conversion_service.rb
│   ├── components/        # ViewComponent UI 컴포넌트
│   └── models/
│       └── design_system/ # 디자인 시스템 모델
├── docs/
│   ├── PRD.md             # 제품 요구사항 (필독)
│   ├── DESIGN_GUIDELINES.md  # 디자인 가이드라인 (엄격 준수)
│   ├── SYSTEM_PROMPT.md   # Gemini 프롬프트
│   ├── PLAN.md            # 개발 로드맵
│   └── CHANGELOG.md       # 개발 로그
├── CLAUDE.md              # 본 문서
└── DEPLOYMENT.md          # 배포 가이드
```

---

## ✅ 작업 플로우

### 1. 작업 시작 전
```
□ CLAUDE.md (본 문서) 읽기
□ docs/PRD.md에서 관련 기능 확인
□ docs/PLAN.md에서 현재 주차 체크리스트 확인
□ (UI 작업 시) docs/DESIGN_GUIDELINES.md 확인
```

### 2. 개발 중
```
□ PRD 요구사항과 일치하는지 수시 확인
□ 디자인 가이드라인 위반 여부 확인
□ 불명확한 부분은 즉시 질문
□ 변경 사항 Git commit (명확한 메시지 작성)
```

### 3. 작업 완료 후
```
□ docs/PLAN.md 체크리스트 업데이트
□ docs/CHANGELOG.md 업데이트
□ 로컬 테스트 완료 확인
□ (필요 시) 사용자에게 리뷰 요청
```

---

## 🔧 주요 개발 가이드

### Gemini API 연동 시
- **시스템 프롬프트**: `docs/SYSTEM_PROMPT.md` 전체 내용을 Gemini에게 전달
- **유저 프롬프트**: 사용자 문서 + 채팅 메시지 조합
- **에러 핸들링**: PRD 9.3절 참조 (명확한 에러 메시지)

### 디자인 작업 시
- **색상**: `docs/DESIGN_GUIDELINES.md` 2절 팔레트만 사용
- **폰트**: Pretendard만 사용 (CDN 로드 필수)
- **컴포넌트**: `.slide`, `.card`, `.flow-box` 등 정의된 클래스만 사용
- **금지 사항**: 10절 확인 (색상 변경, 폰트 변경, 슬라이드 크기 변경 등)

### 데이터 모델 작업 시
- **참조**: PRD 8절 (데이터 모델)
- **저장 정책**: 사용자당 최대 5개 슬라이드, Pin 최대 4개
- **암호화**: API 키 등 민감 정보는 `attr_encrypted` 사용

---

## ❓ 질문해야 하는 경우

### 즉시 질문
- PRD에 명시되지 않은 기능 추가 요청 시
- 디자인 가이드라인과 충돌하는 요구사항 시
- 기술적으로 불가능하거나 어려운 작업 시

### 확인 후 진행
- 요구사항이 모호한 경우 (예: "깔끔하게 만들어줘")
- 여러 해결 방법이 있는 경우 (최선의 방법 제안 후 선택 요청)

---

## 📝 문서 업데이트 규칙

### CHANGELOG.md 업데이트
- 작업 완료 시 반드시 업데이트
- 형식: `[날짜] - [작업 내용] - [변경 파일]`

### PLAN.md 체크리스트 업데이트
- 작업 완료 시 `[ ]` → `[x]`로 변경
- 블로커 발견 시 "리스크 관리" 섹션에 기록

### PRD.md 수정
- **사용자 승인 필수**
- 수정 시 버전 번호 업데이트 (예: 1.0.0 → 1.1.0)

---

## 🎯 우선순위

### 높은 우선순위 (즉시 처리)
1. PRD 요구사항 구현
2. 디자인 가이드라인 준수
3. 보안 및 개인정보 보호 (PRD 9절)

### 중간 우선순위 (논의 후 처리)
1. 성능 최적화
2. UX 개선
3. 코드 리팩토링

### 낮은 우선순위 (베타 이후)
1. 추가 기능 (PRD Phase 2, 3)
2. 협업 기능
3. 템플릿 확장

---

## 🚀 배포 전 체크리스트

```
□ 모든 테스트 통과
□ docs/PLAN.md 해당 마일스톤 체크리스트 완료
□ 환경 변수 설정 확인 (.kamal/secrets)
□ DEPLOYMENT.md 가이드 따라 배포 실행
□ 배포 후 서비스 동작 확인
□ docs/CHANGELOG.md 배포 기록
```

---

## 📞 도움 요청

### 막힐 때
1. 관련 문서 다시 읽기 (PRD, DESIGN_GUIDELINES, SYSTEM_PROMPT)
2. 비슷한 코드 참조 (`app/services/` 등)
3. 사용자에게 명확한 질문 (문제 상황 + 시도한 방법 설명)

### 버그 발견 시
1. 재현 가능한지 확인
2. 로그 확인 (`kamal app logs`)
3. PRD 요구사항과 일치하는지 확인
4. 사용자에게 보고 (증상 + 원인 추정 + 해결 방안 제시)

---

## ⚡ 빠른 참조

| 작업 | 참조 문서 | 섹션 |
|------|-----------|------|
| 새 기능 추가 | PRD.md | 4. 핵심 기능 |
| UI 디자인 | DESIGN_GUIDELINES.md | 전체 |
| Gemini 연동 | SYSTEM_PROMPT.md | 전체 |
| 일정 확인 | PLAN.md | 해당 Week |
| 배포 | DEPLOYMENT.md | 전체 |
| 보안 | PRD.md | 9. 보안 및 개인정보 |
| 데이터 모델 | PRD.md | 8. 데이터 모델 |

---

**최종 업데이트**: 2025-10-02
**작성자**: Claude
**문의 사항**: 사용자에게 직접 질문
